{"version":3,"file":"AccountPage.js","names":["React","ActionGroup","Button","Form","FormGroup","TextInput","InputGroup","Grid","GridItem","ExpandableSection","ValidatedOptions","PageSection","PageSectionVariants","Text","TextVariants","TextContent","AccountServiceContext","Msg","ContentPage","ContentAlert","LocaleSelector","KeycloakContext","AIACommand","ExternalLinkSquareAltIcon","AccountPage","Component","constructor","props","context","_defineProperty","features","isRegistrationEmailAsUsername","isEditUserNameAllowed","deleteAccountAllowed","updateEmailFeatureEnabled","updateEmailActionEnabled","errors","username","firstName","lastName","email","formFields","attributes","DEFAULT_STATE","fetchPersonalInfo","value","event","target","currentTarget","name","setState","state","validationMessage","preventDefault","form","isValid","checkValidity","reqData","doPost","then","success","locale","window","location","reload","formData","FormData","validationMessages","Array","from","keys","reduce","acc","key","elements","keycloak","execute","createElement","isRequired","type","id","maxLength","onChange","handleChange","validated","error","default","isReadOnly","doGet","response","data","render","fields","title","introMessage","isFilled","variant","light","className","component","small","localize","onSubmit","handleSubmit","undefined","label","fieldId","helperTextInvalid","UsernameInput","RestrictedUsernameInput","isUpdateEmailFeatureEnabled","isDisabled","isUpdateEmailActionEnabled","Consumer","onClick","handleEmailUpdate","icon","iconPosition","msgKey","isInternationalizationEnabled","Object","values","filter","e","length","handleCancel","isDeleteAccountAllowed","style","marginTop","toggleText","hasGutter","span","handleDelete"],"sources":["../../../src/app/content/account-page/AccountPage.tsx"],"sourcesContent":["/*\n * Copyright 2018 Red Hat, Inc. and/or its affiliates.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as React from 'react';\nimport { ActionGroup,\n    Button,\n    Form,\n    FormGroup,\n    TextInput,\n    InputGroup,\n    Grid,\n    GridItem,\n    ExpandableSection,\n    ValidatedOptions,\n    PageSection,\n    PageSectionVariants,\n    Text,\n    TextVariants,\n    TextContent\n} from '@patternfly/react-core';\n\nimport { HttpResponse } from '../../account-service/account.service';\nimport { AccountServiceContext } from '../../account-service/AccountServiceContext';\nimport { Features } from '../../widgets/features';\nimport { Msg } from '../../widgets/Msg';\nimport { ContentPage } from '../ContentPage';\nimport { ContentAlert } from '../ContentAlert';\nimport { LocaleSelector } from '../../widgets/LocaleSelectors';\nimport { KeycloakContext } from '../../keycloak-service/KeycloakContext';\nimport { KeycloakService } from '../../keycloak-service/keycloak.service';\nimport { AIACommand } from '../../util/AIACommand';\nimport {ExternalLinkSquareAltIcon} from \"@patternfly/react-icons\";\n\ndeclare const features: Features;\ndeclare const locale: string;\n\ninterface AccountPageProps {\n}\n\ninterface FormFields {\n    readonly username?: string;\n    readonly firstName?: string;\n    readonly lastName?: string;\n    readonly email?: string;\n    attributes?: { locale?: [string] };\n}\n\ninterface AccountPageState {\n    readonly errors: FormFields;\n    readonly formFields: FormFields;\n}\n\n/**\n * @author Stan Silvert ssilvert@redhat.com (C) 2018 Red Hat Inc.\n */\nexport class AccountPage extends React.Component<AccountPageProps, AccountPageState> {\n    static contextType = AccountServiceContext;\n    context: React.ContextType<typeof AccountServiceContext>;\n    private isRegistrationEmailAsUsername: boolean = features.isRegistrationEmailAsUsername;\n    private isEditUserNameAllowed: boolean = features.isEditUserNameAllowed;\n    private isDeleteAccountAllowed: boolean = features.deleteAccountAllowed;\n    private isUpdateEmailFeatureEnabled: boolean = features.updateEmailFeatureEnabled;\n    private isUpdateEmailActionEnabled: boolean = features.updateEmailActionEnabled;\n    private readonly DEFAULT_STATE: AccountPageState = {\n        errors: {\n            username: '',\n            firstName: '',\n            lastName: '',\n            email: ''\n        },\n        formFields: {\n            username: '',\n            firstName: '',\n            lastName: '',\n            email: '',\n            attributes: {}\n        }\n    };\n\n    public state: AccountPageState = this.DEFAULT_STATE;\n\n    public constructor(props: AccountPageProps, context: React.ContextType<typeof AccountServiceContext>) {\n        super(props);\n        this.context = context;\n\n        this.fetchPersonalInfo();\n    }\n\n    private fetchPersonalInfo(): void {\n        this.context!.doGet<FormFields>(\"/\")\n            .then((response: HttpResponse<FormFields>) => {\n                this.setState(this.DEFAULT_STATE);\n                const formFields = response.data;\n                if (!formFields!.attributes) {\n                    formFields!.attributes = { locale: [locale] };\n                }\n                else if (!formFields!.attributes.locale) {\n                    formFields!.attributes.locale = [locale];\n                }\n\n                this.setState({...{ formFields: formFields as FormFields }});\n            });\n    }\n\n    private handleCancel = (): void => {\n        this.fetchPersonalInfo();\n    }\n\n    private handleChange = (value: string, event: React.FormEvent<HTMLInputElement>) => {\n        const target = event.currentTarget;\n        const name = target.name;\n\n        this.setState({\n            errors: { ...this.state.errors, [name]: target.validationMessage },\n            formFields: { ...this.state.formFields, [name]: value }\n        });\n    }\n\n    private handleSubmit = (event: React.FormEvent<HTMLFormElement>): void => {\n        event.preventDefault();\n        const form = event.target as HTMLFormElement;\n        const isValid = form.checkValidity();\n        if (isValid) {\n            const reqData: FormFields = { ...this.state.formFields };\n            this.context!.doPost<void>(\"/\", reqData)\n                .then(() => {\n                    ContentAlert.success('accountUpdatedMessage');\n                    if (locale !== this.state.formFields.attributes!.locale![0]) {\n                        window.location.reload();\n                    }\n                });\n        } else {\n            const formData = new FormData(form);\n            const validationMessages = Array.from(formData.keys()).reduce((acc, key) => {\n                acc[key] = form.elements[key].validationMessage\n                return acc\n            }, {});\n            this.setState({\n                errors: { ...validationMessages },\n                formFields: this.state.formFields\n            });\n        }\n\n    }\n\n    private handleDelete = (keycloak: KeycloakService): void => {\n        new AIACommand(keycloak, \"delete_account\").execute();\n    }\n\n    private handleEmailUpdate = (keycloak: KeycloakService): void => {\n        new AIACommand(keycloak, \"UPDATE_EMAIL\").execute();\n    }\n\n    public render(): React.ReactNode {\n        const fields: FormFields = this.state.formFields;\n        return (\n            <ContentPage\n                title=\"personalInfoHtmlTitle\"\n                introMessage=\"personalSubMessage\"\n            >\n                <PageSection isFilled variant={PageSectionVariants.light}>\n                    <TextContent className=\"pf-u-mb-lg\">\n                        <Text component={TextVariants.small}>\n                          {Msg.localize('allFieldsRequired')}\n                        </Text>\n                    </TextContent>\n                    <Form\n                        onSubmit={(event) => this.handleSubmit(event)}\n                        className=\"personal-info-form\"\n                    >\n                        {!this.isRegistrationEmailAsUsername && fields.username != undefined && (\n                            <FormGroup\n                                label={Msg.localize(\"username\")}\n                                fieldId=\"user-name\"\n                                helperTextInvalid={this.state.errors.username}\n                                validated={\n                                    this.state.errors.username !== \"\"\n                                        ? ValidatedOptions.error\n                                        : ValidatedOptions.default\n                                }\n                            >\n                                {this.isEditUserNameAllowed && <this.UsernameInput />}\n                                {!this.isEditUserNameAllowed && (\n                                    <this.RestrictedUsernameInput />\n                                )}\n                            </FormGroup>\n                        )}\n                        {!this.isUpdateEmailFeatureEnabled && <FormGroup\n                            label={Msg.localize('email')}\n                            fieldId=\"email-address\"\n                            helperTextInvalid={this.state.errors.email}\n                            validated={\n                                this.state.errors.email !== \"\"\n                                    ? ValidatedOptions.error\n                                    : ValidatedOptions.default\n                            }\n                        >\n                            <TextInput\n                                isRequired\n                                type=\"email\"\n                                id=\"email-address\"\n                                name=\"email\"\n                                maxLength={254}\n                                value={fields.email}\n                                onChange={this.handleChange}\n                                validated={\n                                    this.state.errors.email !== \"\"\n                                        ? ValidatedOptions.error\n                                        : ValidatedOptions.default\n                                }\n                            ></TextInput>\n                        </FormGroup> }\n                        {this.isUpdateEmailFeatureEnabled && <FormGroup\n                            label={Msg.localize('email')}\n                            fieldId=\"email-address\"\n                        >\n                            <InputGroup>\n                                <TextInput\n                                    isDisabled\n                                    type=\"email\"\n                                    id=\"email-address\"\n                                    name=\"email\"\n                                    value={fields.email}\n                                >\n                                </TextInput>\n                                {this.isUpdateEmailActionEnabled && (!this.isRegistrationEmailAsUsername || this.isEditUserNameAllowed) &&\n                                    <KeycloakContext.Consumer>\n                                        { (keycloak) => (\n                                            <Button id=\"update-email-btn\"\n                                                    variant=\"link\"\n                                                    onClick={() => this.handleEmailUpdate(keycloak!)}\n                                                    icon={<ExternalLinkSquareAltIcon/>}\n                                                    iconPosition=\"right\">\n                                                <Msg msgKey=\"updateEmail\" />\n                                            </Button>\n                                        )}\n                                    </KeycloakContext.Consumer>\n                                }\n                            </InputGroup>\n                        </FormGroup> }\n                        <FormGroup\n                            label={Msg.localize(\"firstName\")}\n                            fieldId=\"first-name\"\n                            helperTextInvalid={this.state.errors.firstName}\n                            validated={\n                                this.state.errors.firstName !== \"\"\n                                    ? ValidatedOptions.error\n                                    : ValidatedOptions.default\n                            }\n                        >\n                            <TextInput\n                                isRequired\n                                type=\"text\"\n                                id=\"first-name\"\n                                name=\"firstName\"\n                                maxLength={254}\n                                value={fields.firstName}\n                                onChange={this.handleChange}\n                                validated={\n                                    this.state.errors.firstName !== \"\"\n                                        ? ValidatedOptions.error\n                                        : ValidatedOptions.default\n                                }\n                            ></TextInput>\n                        </FormGroup>\n                        <FormGroup\n                            label={Msg.localize(\"lastName\")}\n                            fieldId=\"last-name\"\n                            helperTextInvalid={this.state.errors.lastName}\n                            validated={\n                                this.state.errors.lastName !== \"\"\n                                    ? ValidatedOptions.error\n                                    : ValidatedOptions.default\n                            }\n                        >\n                            <TextInput\n                                isRequired\n                                type=\"text\"\n                                id=\"last-name\"\n                                name=\"lastName\"\n                                maxLength={254}\n                                value={fields.lastName}\n                                onChange={this.handleChange}\n                                validated={\n                                    this.state.errors.lastName !== \"\"\n                                        ? ValidatedOptions.error\n                                        : ValidatedOptions.default\n                                }\n                            ></TextInput>\n                        </FormGroup>\n                        {features.isInternationalizationEnabled && (\n                            <FormGroup\n                                label={Msg.localize(\"selectLocale\")}\n                                isRequired\n                                fieldId=\"locale\"\n                            >\n                                <LocaleSelector\n                                    id=\"locale-selector\"\n                                    value={fields.attributes!.locale || \"\"}\n                                    onChange={(value) =>\n                                        this.setState({\n                                            errors: this.state.errors,\n                                            formFields: {\n                                                ...this.state.formFields,\n                                                attributes: {\n                                                    ...this.state.formFields.attributes,\n                                                    locale: [value],\n                                    },\n                                    },\n                                    })\n                                    }\n                                />\n                            </FormGroup>\n                        )}\n                        <ActionGroup>\n                            <Button\n                                type=\"submit\"\n                                id=\"save-btn\"\n                                variant=\"primary\"\n                                isDisabled={\n                                    Object.values(this.state.errors).filter((e) => e !== \"\")\n                                    .length !== 0\n                                }\n                            >\n                                <Msg msgKey=\"doSave\" />\n                            </Button>\n                            <Button\n                                id=\"cancel-btn\"\n                                variant=\"link\"\n                                onClick={this.handleCancel}\n                            >\n                                <Msg msgKey=\"doCancel\" />\n                            </Button>\n                        </ActionGroup>\n                    </Form>\n\n            {this.isDeleteAccountAllowed && (\n                <div id=\"delete-account\" style={{ marginTop: \"30px\" }}>\n                    <ExpandableSection toggleText={Msg.localize(\"deleteAccount\")}>\n                        <Grid hasGutter>\n                            <GridItem span={6}>\n                                <p>\n                                    <Msg msgKey=\"deleteAccountWarning\" />\n                                </p>\n                            </GridItem>\n                            <GridItem span={4}>\n                                <KeycloakContext.Consumer>\n                                    {(keycloak) => (\n                                        <Button\n                                            id=\"delete-account-btn\"\n                                            variant=\"danger\"\n                                            onClick={() => this.handleDelete(keycloak!)}\n                                            className=\"delete-button\"\n                                        >\n                                            <Msg msgKey=\"doDelete\" />\n                                        </Button>\n                                    )}\n                                </KeycloakContext.Consumer>\n                            </GridItem>\n                            <GridItem span={2}></GridItem>\n                        </Grid>\n                    </ExpandableSection>\n                </div>\n            )}\n            </PageSection>\n        </ContentPage>\n        );\n    }\n\n    private UsernameInput = () => (\n        <TextInput\n            isRequired\n            type=\"text\"\n            id=\"user-name\"\n            name=\"username\"\n            maxLength={254}\n            value={this.state.formFields.username}\n            onChange={this.handleChange}\n            validated={this.state.errors.username !== '' ? ValidatedOptions.error : ValidatedOptions.default}\n            >\n        </TextInput>\n    );\n\n    private RestrictedUsernameInput = () => (\n        <TextInput\n            isReadOnly\n            type=\"text\"\n            id=\"user-name\"\n            name=\"username\"\n            value={this.state.formFields.username}\n        >\n        </TextInput>\n    );\n};\n"],"mappings":"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"}