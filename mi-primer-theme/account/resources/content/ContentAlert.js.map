{"version":3,"file":"ContentAlert.js","names":["React","Alert","AlertActionCloseButton","AlertGroup","AlertVariant","Msg","ContentAlert","Component","constructor","props","_defineProperty","key","setState","alerts","state","filter","el","Date","getTime","variant","message","params","getUniqueId","push","localize","danger","setTimeout","hideAlert","instance","success","postAlert","warning","info","render","createElement","isToast","map","isLiveRegion","title","actionClose","variantLabel","onClose","_class"],"sources":["../../src/app/content/ContentAlert.tsx"],"sourcesContent":["/*\n * Copyright 2019 Red Hat, Inc. and/or its affiliates.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as React from 'react';\nimport { Alert, AlertActionCloseButton, AlertGroup, AlertVariant } from '@patternfly/react-core';\nimport { Msg } from '../widgets/Msg';\n\ninterface ContentAlertProps { }\n\ninterface ContentAlertState {\n    alerts: {\n        key: number;\n        message: string;\n        variant: AlertVariant;\n    }[];\n}\nexport class ContentAlert extends React.Component<ContentAlertProps, ContentAlertState> {\n    private static instance: ContentAlert;\n\n    private constructor(props: ContentAlertProps) {\n        super(props);\n\n        this.state = {\n            alerts: []\n        };\n        ContentAlert.instance = this;\n    }\n\n    /**\n     * @param message A literal text message or localization key.\n     */\n    public static success(message: string, params?: string[]): void {\n        ContentAlert.instance.postAlert(AlertVariant.success, message, params);\n    }\n\n    /**\n     * @param message A literal text message or localization key.\n     */\n    public static danger(message: string, params?: string[]): void {\n        ContentAlert.instance.postAlert(AlertVariant.danger, message, params);\n    }\n\n    /**\n     * @param message A literal text message or localization key.\n     */\n    public static warning(message: string, params?: string[]): void {\n        ContentAlert.instance.postAlert(AlertVariant.warning, message, params);\n    }\n\n    /**\n     * @param message A literal text message or localization key.\n     */\n    public static info(message: string, params?: string[]): void {\n        ContentAlert.instance.postAlert(AlertVariant.info, message, params);\n    }\n\n    private hideAlert = (key: number) => {\n        this.setState({ alerts: [...this.state.alerts.filter(el => el.key !== key)] });\n    }\n\n    private getUniqueId = () => (new Date().getTime());\n\n    private postAlert = (variant: AlertVariant, message: string, params?: string[]) => {\n        const alerts = this.state.alerts;\n        const key = this.getUniqueId();\n        alerts.push({\n            key,\n            message: Msg.localize(message, params),\n            variant\n        });\n        this.setState({ alerts });\n\n        if (variant !== AlertVariant.danger) {\n            setTimeout(() => this.hideAlert(key), 8000);\n        }\n    }\n\n    public render(): React.ReactNode {\n        return (\n            <AlertGroup isToast aria-live=\"assertive\">\n                {this.state.alerts.map(({ key, variant, message }) => (\n                    <Alert\n                        aria-details={message}\n                        isLiveRegion\n                        variant={variant}\n                        title={message}\n                        actionClose={\n                            <AlertActionCloseButton\n                                title={message}\n                                variantLabel={`${variant} alert`}\n                                onClose={() => this.hideAlert(key)}\n                            />\n                        }\n                        key={key} />\n                ))}\n            </AlertGroup>\n        );\n    }\n}\n"],"mappings":"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"}